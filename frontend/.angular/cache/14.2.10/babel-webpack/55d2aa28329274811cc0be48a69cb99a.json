{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet UpdateRecipePage = class UpdateRecipePage {\n  constructor(recipeService, activatedRoute, formBuilder, router, photoService, storage) {\n    this.recipeService = recipeService;\n    this.activatedRoute = activatedRoute;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.photoService = photoService;\n    this.storage = storage;\n    //token: any;\n    this.capturedPhoto = \"\";\n    // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n    this.imageSaved = \"\";\n    this.id = this.activatedRoute.snapshot.paramMap.get(\"id\");\n    //  this.token = this.storage.get(\"token\");\n    //this.token = 'asdfasdf assdf asdf sdf sdf';\n  }\n\n  ngOnInit() {\n    console.log(\"llego hasta aqui para update\");\n    this.findRecipe(this.id);\n    this.updateRecipeForm = this.formBuilder.group({\n      tittle: [\"\"],\n      category: [\"\"],\n      filename: [\"\"]\n    });\n  }\n  /*   ionViewDidEnter(){\r\n      this.findRecipe(this.id);\r\n      this.updateRecipeForm = this.formBuilder.group({\r\n        name: [''],\r\n        category: [''],\r\n        filename: ['']\r\n      });\r\n    } */\n  findRecipe(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let token = yield this.storage.get(\"token\");\n      this.recipeService.getRecipe(this.id, token).subscribe(data => __awaiter(this, void 0, void 0, function* () {\n        this.imageSaved = data[\"filename\"];\n        this.updateRecipeForm.setValue({\n          tittle: data[\"tittle\"],\n          category: data[\"category\"],\n          filename: data[\"filename\"]\n        });\n        console.log();\n      }));\n    });\n  }\n  onSubmit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      let token = yield this.storage.get(\"token\");\n      if (!this.updateRecipeForm.valid) {\n        return false;\n      } else {\n        let blob = null;\n        if (this.capturedPhoto !== \"\") {\n          const response = yield fetch(this.capturedPhoto);\n          blob = yield response.blob();\n        }\n        this.recipeService.updateRecipe(this.id, this.updateRecipeForm.value, blob, token).subscribe(() => {\n          this.updateRecipeForm.reset();\n          this.router.navigate([\"/you-are-logged-in\"]);\n        });\n      }\n    });\n  }\n  pickImage() {\n    this.photoService.pickImage().then(data => {\n      this.capturedPhoto = data.webPath;\n    });\n  }\n};\nUpdateRecipePage = __decorate([Component({\n  selector: \"app-update-recipe\",\n  templateUrl: \"./update-recipe.page.html\",\n  styleUrls: [\"./update-recipe.page.scss\"]\n})], UpdateRecipePage);\nexport { UpdateRecipePage };","map":null,"metadata":{},"sourceType":"module"}