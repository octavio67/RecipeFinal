{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet UpdateRecipePage = class UpdateRecipePage {\n  constructor(recipeService, activatedRoute, formBuilder, router, photoService, storage) {\n    this.recipeService = recipeService;\n    this.activatedRoute = activatedRoute;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.photoService = photoService;\n    this.storage = storage;\n    this.capturedPhoto = '';\n    // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n    this.imageSaved = '';\n    console.log('llego hasta aqui');\n    this.id = this.activatedRoute.snapshot.paramMap.get('id');\n    //  this.token = this.storage.get(\"token\");\n    this.token = 'asdfasdf assdf asdf sdf sdf';\n  }\n  ngOnInit() {\n    console.log('llego hasta aqui');\n    this.findRecipe(this.id);\n    this.updateRecipeForm = this.formBuilder.group({\n      tittle: [''],\n      category: [''],\n      filename: ['']\n    });\n  }\n  findRecipe(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.recipeService.getRecipe(this.id, this.token).subscribe(data => {\n        this.imageSaved = data['filename'];\n        this.updateRecipeForm.setValue({\n          tittle: data['tittle'],\n          category: data['category'],\n          filename: data['filename']\n        });\n      });\n    });\n  }\n  onSubmit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (!this.updateRecipeForm.valid) {\n        return false;\n      } else {\n        let blob = null;\n        if (this.capturedPhoto !== '') {\n          const response = yield fetch(this.capturedPhoto);\n          blob = yield response.blob();\n        }\n        this.recipeService.updateRecipe(this.id, this.updateRecipeForm.value, blob, this.token).subscribe(() => {\n          this.updateRecipeForm.reset();\n          this.router.navigate(['/tabs/tab1']);\n        });\n      }\n    });\n  }\n  pickImage() {\n    this.photoService.pickImage().then(data => {\n      this.capturedPhoto = data.webPath;\n    });\n  }\n};\nUpdateRecipePage = __decorate([Component({\n  selector: 'app-update-recipe',\n  templateUrl: './update-.page.html',\n  styleUrls: ['./update-recipe.page.scss']\n})], UpdateRecipePage);\nexport { UpdateRecipePage };","map":null,"metadata":{},"sourceType":"module"}