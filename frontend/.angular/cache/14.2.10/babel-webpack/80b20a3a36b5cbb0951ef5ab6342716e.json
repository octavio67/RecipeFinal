{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\n//import { User } from '../auth/user';\n// import { timeStamp } from 'console';\nlet YouAreLoggedInPage = class YouAreLoggedInPage {\n  constructor(authService, router, activatedRoute, recipeService, alertController, storage) {\n    this.authService = authService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.recipeService = recipeService;\n    this.alertController = alertController;\n    this.storage = storage;\n    this.recipes = [];\n    this.id = this.activatedRoute.snapshot.paramMap.get('id');\n  }\n  ngOnInit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      let username_user = yield this.storage.get('username_user_st');\n      let id = yield this.storage.get('id_user_st');\n      this.getMyRecipes(id);\n      console.log(\"You are logged in: \" + username_user);\n    });\n  }\n  ionViewDidEnter() {\n    return __awaiter(this, void 0, void 0, function* () {\n      let username_user = yield this.storage.get('username_user_st');\n      let id = yield this.storage.get('id_user_st');\n      this.getMyRecipes(id);\n    });\n  }\n  getAllRecipes() {\n    return __awaiter(this, void 0, void 0, function* () {\n      let token = yield this.storage.get(\"token\");\n      this.recipeService.getRecipes(token).subscribe(res => __awaiter(this, void 0, void 0, function* () {\n        console.log(res);\n        this.recipes = res;\n      }), error => {\n        console.log(error);\n        console.log(\"User not authenticated. Please log in\");\n        this.router.navigateByUrl(\"/home\");\n      });\n    });\n  }\n  getMyRecipes(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let token = yield this.storage.get(\"token\");\n      this.recipeService.getMyRecipes(id, token).subscribe(res => __awaiter(this, void 0, void 0, function* () {\n        console.log(res);\n        this.recipes = res;\n      }), error => {\n        console.log(error);\n        console.log(\"User not authenticated. Please log in\");\n        this.router.navigateByUrl(\"/home\");\n      });\n    });\n  }\n  logout() {\n    this.authService.logout().then(() => {\n      this.router.navigateByUrl(\"/home\");\n    });\n  }\n  deleteRecipe(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      let token = yield this.storage.get(\"token\");\n      const alert = yield this.alertController.create({\n        header: 'Cuidado!',\n        subHeader: 'La Receta con id:' + id + ' serÃ¡ eliminada',\n        cssClass: 'custom-alert',\n        buttons: [{\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'alert-button-cancel',\n          handler: () => {\n            console.log('Alert canceled');\n          }\n        }, {\n          text: 'OK',\n          role: 'confirm',\n          cssClass: 'alert-button-confirm',\n          handler: () => {\n            this.recipeService.deleteRecipe(id, token).subscribe(() => {\n              console.log('Receta con id:' + id + ' borrada');\n              this.ionViewDidEnter();\n            });\n          }\n        }]\n      });\n      yield alert.present();\n    });\n  }\n  updateRecipe(id) {\n    this.ionViewDidEnter();\n    this.router.navigateByUrl(`/update-recipe/${id}`);\n  }\n  addRecipe() {\n    this.ionViewDidEnter();\n    this.router.navigateByUrl('/add-recipe');\n  }\n};\nYouAreLoggedInPage = __decorate([Component({\n  selector: 'app-you-are-logged-in',\n  templateUrl: './you-are-logged-in.page.html',\n  styleUrls: ['./you-are-logged-in.page.scss']\n})], YouAreLoggedInPage);\nexport { YouAreLoggedInPage };","map":null,"metadata":{},"sourceType":"module"}